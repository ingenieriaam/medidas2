<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- TITULO DE LA PRESENTACIÓN -->
		<title>Control virtual de instrumentos de medicion - UTNBA</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<!-- TEMA ELEGIDO DE FONDO -->
		<link rel="stylesheet" href="css/theme/league.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">		
			<div class="slides">			

<!-- INICIO DE LA PRESENTACIÓN -->			
	<section data-background="img/fondo.svg">
		<div style="position: absolute; width: 70%; height:500% ; left: -10%;top:1000%; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(1, 1, 1, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">		
		<h2>Control virtual de instrumentos de medicion
		<img src="https://sceu.frba.utn.edu.ar/nochedelosmuseos/logoutnba.png" alt="" width="320" height="116" /> </h2>
		</div>
	</section>

	<section data-markdown
			 data-background="fondo.png"
		     data-separator="^hhhh"
		     data-separator-vertical="^vvvv"
		     data-separator-notes="^Note:"
		     data-charset="iso-8859-15">

<!-- ........................................ -->
### Sistema de control virtual de instrumentos

 ### Agenda:

---------------

- Objetivos
- ¿Por qué python?
- Comandos, formatos y usos
- Especificaciones Visa
- Primeros pasos y Primeros problemas
- Trabajo en proceso




hhhh

### Objetivos ###

---------------

Control de mediante software desarrollado en lenguaje de alto nivel

|||
|--------|----------|
|[![mat](https://research-it.berkeley.edu/sites/default/files/styles/large/public/matlab-logo.jpg?itok=Zse5goL-)](https://la.mathworks.com/products/matlab.html)| [![py](https://conceptosclaros.com/wp-content/uploads/2017/01/herramientas-de-analisis-de-datos-python.png)](https://www.python.org/) |	

vvvv

### Equipos a controlar ###
(en principio)


| [Equipo]() | [Modelo]() |
| ------- | --------- |
| Analizador| Agilent N9320A |
| Generador| Agilent N9310A |
| Medidor de potencia | Anritsu ML2487B con sensor MA2472D  |
</section>

<!-- ........................................ -->


<section>
<h2>¿Por qué <img src="https://www.python.org/static/img/python-logo.png" alt="" width="270" height="70" /> ?</h2>
<p class="fragment fade-right">Lenguaje interpretado,</p>
<p class="fragment fade-right">Colaborativo,</p>
<p class="fragment fade-right">Posee gran disponibilidad de librerias,</p>
<p class="fragment fade-right">Permite desarrollos y pruebas rapidas,</p>
<p class="fragment fade-right">Es gratuito.</p>
<p><span class="fragment">Ademas es simple</span> <span class="fragment">con gran soporte y</span> <span class="fragment"style="text-apgn: center; font-size: 3em; text-apgn: center;"><span class="fragment highlight-red">Portable.</span></p>

</section>

<!-- ........................................ -->

<section data-markdown
	     data-separator="^hhhh"
	     data-separator-vertical="^vvvv"
	     data-separator-notes="^Note:"
	     data-charset="iso-8859-15">


### Comandos, formatos y usos ###

---------------

Comandos IEEE 488.2
```py
*CLS 
*ESE 
*ESR? 
*IDN? 
*OPC
*RST
*SRE
*STB?
*TRG
*TST?
*WAI
```
vvvv

Tipos:

---------------

- Read
- Write
- Query

Ejemplos: 

- *CLS limpia los registros de eventos, es tipo READ
- IDN? consulta la identificación del equipo, es tipo QUERY
 ```py
>>> print(inst.query("*IDN?"))
>>> Rigol Technologies,DSA815,DSA8A194601374,00.01.18.00.02
>>> # modelo, número de serie, versión de software
 ```

vvvv

### Comandos propios:

--------------------
mayor complejidad

```py
[:SENSe]:ACPower:BANDwidth:INTegration <freq>
[:SENSe]:ACPower:BANDwidth:INTegration?
# subsystem | función | opciones de set y consulta | parametros
```
Admite ser del tipo write o query.

vvvv

Ejemplo:

 ```py
>>> # set del bandwidth del canal principal en 1 MHz.
>>> inst.write(":SENSe:ACPower:BANDwidth:INTegration 1000000");
>>> # la consulta retornará 1000000.
>>> print(inst.query(":SENSe:ACPower:BANDwidth:INTegration?"))
>>> 1000000
 ```

hhhh

### Especificaciones Visa

--------------------

[Virtual Instrument Software Architecture.]()
Definidas a mediados de los 90 por parte de Agilent y National Instruments, buscaba unificar los protocolos de comunicación a traves de los distintos conexionados (GPIB, RS232, USB, Ethernet). VISA es un estandar de configuración, programacion y solución a problemas comunes. Hoy en día, la mayoria de los fabricantes facilitan librerias VISA de forma gratuita y las mismas están soportadas en distintos lenguajes de programación.

vvvv

Libreria para Python:
[PyVisa](https://pyvisa.readthedocs.io/en/latest/) 

Algunas de las funciones principales:
 ```py
>>> visa.ResourceManager();
>>> list_resources();
>>> inst.write("cmd");
>>> inst.read("cmd");
>>> inst.query("cmd");
>>> inst.read_bytes(n)
>>> inst.close()
 ```
</section>

<!-- ........................................ -->

<section data-background="img/pensar.svg"
		 data-transition="none"> 
	<h2 class="fragment fade-right">Primeros pasos</h2>
	<h2 class="fragment fade-right">...</h2>
</section>
	<section data-background="img/pensar2.svg" data-transition="none">
	<h2>Primeros pasos</h2>
	<h2>... Primeros problemas</h2>
</section>

<!-- ........................................ -->
<section data-markdown
	     data-separator="^hhhh"
	     data-separator-vertical="^vvvv"
	     data-separator-notes="^Note:"
	     data-charset="iso-8859-15">

## Primer intento
|||
|-|-|
|Analizador de especto **Agilent N9320A**|[![Agilent N9320A](img/9320AN.png)](https://www.keysight.com/en/pd-817002-pn-N9320A/rf-spectrum-analyzer-9-khz-3-ghz?cc=US&lc=eng)|

vvvv

## Agilent N9320A

-----------------
|[Prueba 1]()|[Resultado]()|[|[Conclusión]()|
|-|-|-|
|conexión Ethernet|No hay comunicación|Leer manual|
|||![arrow](http://rochestercocktailrevival.com/assets/chopped/arrow_right_red.png)

</section>

<!-- ........................................ -->

<section data-background-iframe="https://literature.cdn.keysight.com/litweb/pdf/N9320-90001.pdf?id=1460375" data-background-interactive>
	<div style="position: absolute; width: 40%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,95), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(10, 10, 10, 0.9); color: #aaf; font-size: 20px; text-align: center;">
		<h2>Guia de Usuario</h2>
		<p>En busca de respuestas</p>
	</div>
</section>

<!-- ........................................ -->

<section data-markdown
	     data-separator="^hhhh"
	     data-separator-vertical="^vvvv"
	     data-separator-notes="^Note:"
	     data-charset="iso-8859-15">
|[Prueba 2]()|[Resultado]()|[|[Conclusión]()|
|-|-|-|
|Conexión USB|Solo permite seteos, no contesta query|Algo anda mal|

vvvv

|[Prueba 3]()|[Resultado]()|[|[Conclusión]()|
|-|-|-|
|Conexión USB con librerias propietarias|Funciona de forma erratica y en ocaciones no establece la conexión|Pensar en usar otro analizador|

vvvv



|[Prueba 4]()|[Resultado]()|[|[Conclusión]()|
|-|-|-|
|Conexión USB y ethernet en Rigol DSA815|Funciona todo lo que probamos|Usaremos este equipo ![dsa](img/dsa815.jpg)|

hhhh

|||
|-|-|
|Generador de señales **Agilent N9310A**|[![Agilent N9320A](img/generator.png)](img/generator.png)|

--------------

vvvv

## Agilent N9310A ## 

-----------------
|[Pruebas]()|[Resultados]()|[Conclusión]()|
|-|-|-|
|Conexión Ethernet|No hay port|Conexión USB|
|Conexión USB|Comunicación errática|[**Evaluar el uso de otro generador**]()|
|Seteos basicos|Eventualmente se configura como pedimos|Aún falta dedicarle más tiempo|

hhhh

|||
|-|-|
|Medidor de potencia **Anritsu ML2487B con sensor MA2472D**|[![Agilent N9320A](https://www.used-line.com/picturesauto/352/11481352.jpg)](img/anritsu.png)|

--------------

vvvv

## Anritsu ML2487B ## 

-----------------

|[Prueba 1]()|[Resultados]()|[Conclusión]()|
|-|-|-|
| Conexión Ethernet | Se debe conocer la IP | Usar IP fija o verla en la configuración del instrumento |

vvvv

|[Prueba 2]()|[Resultados]()|[Conclusión]()|
|-|-|-|
|Utilización de pyVisa | No funcionó | Buscar alternativa |

vvvv

|[Prueba 3]()|[Resultados]()|[Conclusión]()|
|-|-|-|
|Página web hosteada en el instrumento| Interfaz poco práctica | Comunicarse con la web de forma programática |

vvvv

## Conclusión
-------------
Se utilizó una solución programática para interactuar con el sitio web.

## python + [cURL](https://curl.haxx.se/)


</section>

<!-- ........................................ -->

<section data-markdown
		 data-background="img/work.svg"
	     data-separator="^hhhh"
	     data-separator-vertical="^vvvv"
	     data-separator-notes="^Note:"
	     data-charset="iso-8859-15">

## Proximamente ...

</section>

<!-- ........................................ -->

<section data-markdown
	     data-separator="^hhhh"
	     data-separator-vertical="^vvvv"
	     data-separator-notes="^Note:"
	     data-charset="iso-8859-15">

## [Desafíos]() 

-----------------------

- Mayor conocimiento del instrumental
- Conocer el correcto modo de manipulación
- Adaptar los comandos a un formato más "amigable"
- Verificar el funcionamiento de los códigos generados 

vvvv

## [Dificultades]() 

-----------------------

- Disponibilidad de tiempo de desarrollo
- Parte del instrumental no está siempre a disposición
- Pedir en prestamo del instrumental es riesgoso 
- Numeroso set de comandos (aprox 200 por instrumento)

 </section>

<!-- ........................................ -->

<section data-background-iframe="https://www.latex-tutorial.com/tutorials/amsmath/" data-background-interactive>
	<div style="position: absolute; width: 30%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,95), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(180, 180, 180, 0.9); color: #00f; padding: bb20px; font-size: 20px; text-align: right;">
		<h2>Consulta de sintaxis</h2>
		<p>especifico para ecuaciones.</p>
	</div>
</section>

<!-- ........................................ -->

<section data-markdown
         data-separator="^hhhh"
         data-separator-vertical="^vvvv"
         data-separator-notes="^Note:"
         data-charset="iso-8859-15">
	<textarea data-template>

    $\frac{d}{{dx}}\left( {D\frac{{dc}}{{dx}}} \right) + S = 0$
    aca hay algun tema con las ecuaciones
vvvv

### retomando Markdown

    $\frac{d}{{dx}}\left( {D\frac{{dc}}{{dx}}} \right) + S = 0$

	</textarea>
</section>

<!-- ........................................ -->

<section data-background-video="https://s3.amazonaws.com/static.slid.es/site/homepage/v1/homepage-video-editor.mp4,https://s3.amazonaws.com/static.slid.es/site/homepage/v1/homepage-video-editor.webm" data-background-color="#000000">
						<div style="background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px;">
							<h2>Video de fondo, por la dudas</h2>
							<pre><code class="hljs html" style="word-wrap: break-word;">&lt;section data-background-video="video.mp4,video.webm"&gt;</code></pre>
						</div>
</section>

<!-- ........................................ -->

	</div>
		</div>
		<script src="js/reveal.js"></script>
		<script>
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true },
					{ src: 'plugin/math/math.js', async: true }
				]
			});
		</script>
	</body>
</html>
